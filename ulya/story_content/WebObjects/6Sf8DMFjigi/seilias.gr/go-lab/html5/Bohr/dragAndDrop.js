/*!
* © by Sitsanlis Ilias
* This notice shall be included in all copies or substantial portions of the Software.
* Creative Commons 4.0/CC BY - NC - SA 4.0. 
*/


function mouseDownGen(e){var t=canvas.width,a=canvas.height;e.target.offset={x:e.target.x-e.stageX*(720/t),y:e.target.y-e.stageY*(420/a)},RVector.x=X0+r1*n*n*xScale,ni=n,RVector.setScaleX(0),"electron"==e.target.name?e.target.addEventListener("pressmove",pressMoveGen):(nf=parseInt(e.target.name,10),isNaN(ni)&&(ni=n=nf),RVector.setScaleX((nf*nf-ni*ni)*r1*xScale),currentLevel.y=13.6*energySCALE/(nf*nf),stage.update())}function pressMoveGen(e){var t=canvas.width,n=canvas.height,a=e.stageX*(720/t)+e.target.offset.x;e.stageY,e.target.offset.y;if("electron"==e.target.name){nf=Math.round(Math.sqrt((a-X0)/xScale/r1)),isNaN(nf)&&(nf=1),nf<=0&&(nf=1,ni=1);var r=-13.6/(ni*ni),s=-13.6/(nf*nf),o=Math.abs(r-s);RVector.setScaleX((nf*nf-ni*ni)*r1*xScale),valuesText.text=ni+"→"+nf+", E = "+o.toFixed(2)+" eV",updateEnergyLevel(nf),stage.update()}}function pressUpGen(e){e.target.removeEventListener("pressmove",pressMoveGen),returnTo(ni,nf)}function returnTo(e,t){var a=-13.6/(e*e),r=-13.6/(t*t),s=Math.abs(a-r);if(RVector.x=X0+n*n*r1*xScale,t<e){drFinal=(t*t-e*e)*r1*xScale,RVector.x=X0+n*n*r1*xScale,playMovie?RVector.addEventListener("tick",myTween):RVector.setScaleX(0),f=takeFrequency(e,t),drawPhoton(f);var o=c/f*1e9;createLine(o),photon.addEventListener("tick",photonTween),stageUpdateFlag=!0,valuesText.text=e+"→"+t+", E = "+s.toFixed(2)+" eV, f = "+toExp(f)+" Hz, λ = "+Math.round(o)+" nm",18<=count&&(count=0,energyVectors.removeAllChildren());var i=createVector(RGB(o).S,!1,!1,!0);i.rotation=90,i.setScaleX(s*energySCALE),i.y=30-a*energySCALE,energyVectors.addChild(i),energyVectors.x=70-4*count/2,i.x=4*count,count++}else RVector.setScaleX(0),valuesText.text=e+"→"+t+", E = "+s.toFixed(2)+" eV";n=t,e=n,updateEnergyLevel(n),restart()}function mouseDownBack(e){var t=canvas.width,n=canvas.height;e.target.addEventListener("pressmove",pressMoveBack),e.target.parent.offset={x:e.target.parent.x-e.stageX*(720/t),y:e.target.parent.y-e.stageY*(420/n)}}function pressMoveBack(e){var t=canvas.width,n=canvas.height;e.target.parent.x=e.stageX*(720/t)+e.target.parent.offset.x,e.target.parent.y=e.stageY*(420/n)+e.target.parent.offset.y,stage.update()}function pressUpBack(e){e.target.removeEventListener("pressmove",pressMoveGen)}